@page "/"
@inject HttpClient Http
@inject ZMCache Cache
@inject NavigationManager NavigationManager

<p class="h3">recent mev</p>

<BlocksTable MEVBlocks=MEVBlocks/>

<hr />

<ul class="pagination">
    <li class="page-item"><a class="page-link mx-2 my-2" href="blocks?num=@(MEVBlocks[MEVBlocks.Count-1].BlockNumber-(API.BlocksPerPage+1))">more</a></li>
</ul>


@code {
    List<MEVBlock> MEVBlocks = null;

    private long[,] MockBlocks = new long[,]
                        {
                {13900798,168},
                {13900799,414},
                {13900800,350},
                {13900801,367},
                {13900802,183},
                {13900803,84},
                {13900804,442},
                {13900805,286}
                        };

    protected override async Task OnParametersSetAsync()
    {
        if (MEVBlocks == null)
        {
            MEVBlocks = new List<MEVBlock>();
            for (int i = MockBlocks.GetUpperBound(0); i >= 0; i--)
            {
                var mb = new MEVBlock(MockBlocks[i, 0]);
                MEVBlocks.Add(mb);
            }
        }
    }
}